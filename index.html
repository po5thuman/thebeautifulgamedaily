<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Beautiful Game Daily</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      background: #f6f8f3;
      margin: 0;
      font-family: 'Open Sans', Arial, Helvetica, sans-serif;
      color: #212e18;
      min-height: 100vh;
    }
    .site-header {
      background: #108f46;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 34px 10px 34px;
      box-sizing: border-box;
      box-shadow: 0 2px 14px 0 rgba(17,143,70,.10);
    }
    .site-name {
      font-family: 'Montserrat', sans-serif;
      font-size: 2.1rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      padding-left: 6px;
    }
    .site-ball {
      font-size: 2rem;
      margin-right: 6px;
      display: flex;
      align-items: center;
    }
    .hero-section {
      background: linear-gradient(92deg, #149647 85%, #198a47 100%);
      color: #fff;
      text-align: center;
      padding: 44px 0 36px 0;
      margin-bottom: 40px;
      border-bottom: 3px solid #f9be00;
    }
    .hero-date {
      font-family: 'Montserrat', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      margin-bottom: 0.15em;
    }
    .hero-day {
      font-size: 1.2rem;
      margin-bottom: 0.20em;
      font-family: 'Montserrat', sans-serif;
      font-weight: 500;
    }
    .hero-countdown {
      margin-top: 1.6em;
      font-size: 1.28em;
      font-family: 'Montserrat', sans-serif;
      color: #f9be00;
      font-weight:bold;
      letter-spacing:0.01em;
    }
    .top-row, .bottom-row {
      display: flex;
      gap: 2.2rem;
      max-width: 1200px;
      margin: 0 auto;
      align-items: stretch;
      justify-content: center;
    }
    .top-row, .mid-row { margin-top: 0; }
    .mid-row {
      max-width: 1200px;
      margin: 2.2rem auto 0 auto;
      padding: 0;
      display: block;
    }
    .bottom-row {
      margin: 2.2rem auto 2.5rem auto;
    }
    .top-row .card,
    .bottom-row .card {
      flex: 1 1 0px;
      min-width: 260px;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 3px 16px 0 rgba(40,70,40,0.13);
      padding: 2.1rem 2.2rem 2.2rem 2.2rem;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      min-width: 0;
    }
    .card-label {
      font-family: 'Montserrat', sans-serif;
      background: #108f46;
      color: #fff;
      font-size: 0.92em;
      font-weight: bold;
      letter-spacing: .08em;
      text-transform: uppercase;
      padding: 5px 15px;
      border-radius: 3.4px;
      position: absolute;
      left: 1.2rem; top: 1.1rem;
      z-index: 2;
    }
    .card-label.gold {
      background: #f9be00;
      color: #140e02;
    }
    .card-title {
      font-family: 'Montserrat', sans-serif;
      font-size: 1.3em;
      font-weight: 700;
      color: #1B5E20;
      margin: 2.1em 0 0.08em 0;
      letter-spacing: -0.01em;
    }
    .card-desc {
      color: #2e422a;
      font-family: 'Open Sans', sans-serif;
      font-size: 1.09em;
      margin: 0.4em 0 1.12em 0;
      line-height: 1.5;
    }
    .card-link, .card-info, .card-extra {
      color: #108f46;
      font-weight: 600;
      text-decoration: underline;
      cursor: pointer;
      transition: color .18s;
    }
    .card-link.learnmore {
      margin-top: 0.64em;
      font-size: 1.02em;
      background: none;
      font-family: 'Open Sans', sans-serif;
      font-weight: 700;
      color: #175c2f;
      border: none;
      padding: 0;
    }
    .card-link.learnmore:hover { color: #f9be00; }
    .card-info {
      color: #2f8309;
      font-size: 1.01em;
      font-weight: 600;
      margin-top: 0.3em;
      letter-spacing: 0.01em;
    }
    .card-image-wrap {
      width: 100%;
      margin-top: 2.2em;
      margin-bottom: 1.2em;
      display: flex;
      justify-content: center;
    }
    .card-image {
      width: 92%;
      max-width: 320px;
      height: auto;
      border-radius: 9px;
      object-fit: cover;
      box-shadow: 0 1px 10px 0 rgba(40,70,40,0.13);
      background: #f0f4ea;
    }
    .trivia-btn {
      background: #108f46;
      color: #fff;
      border: none;
      font-family: 'Montserrat', sans-serif;
      font-size: 1.03em;
      padding: 9px 21px;
      border-radius: 7px;
      margin-top: 1.05em;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 6px #108f4630;
      transition: background .20s;
    }
    .trivia-btn:hover, .trivia-btn:focus { background: #175c2f; }
    .trivia-answer {
      display:none;
      margin-top: 1.1em;
      font-size: 1.09em;
      color: #f9be00;
      font-weight: bold;
      letter-spacing: 0.02em;
    }
    .bottom-nav {
      text-align: center;
      margin-bottom: 1.5rem;
      margin-top: 3rem;
    }
    .day-link {
      display: inline-block; margin:0 19px; background: #e4f8e9; border-radius: 6px;
      padding: 9px 18px; text-decoration: none; color: #108f46; font-family: 'Montserrat', sans-serif; font-weight:600; border: 1.5px solid #108f46; font-size: 1.1em; transition: background 0.15s;
    }
    .day-link:hover { background: #aed7bc; }
    .today-label { color:#bbb; font-size: 0.97em; }
    @media (max-width: 930px) {
      .top-row, .bottom-row { flex-direction: column; gap: 1.3rem;}
      .mid-row { max-width:95vw;}
      .card { padding: 1.3rem 1em 1.4rem 1em;}
    }
    @media (max-width: 700px) {
      .card-title { font-size: 1.03em;}
      .hero-date { font-size:1.4rem;}
      .hero-section { padding: 5vw 0 6vw 0;}
    }
    .bottom-row {
      display: flex;
      gap: 2.2rem;
      max-width: 1200px;
      margin: 2.2rem auto 2.5rem auto;
      align-items: stretch;
      justify-content: center;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="site-name">The Beautiful Game Daily</div>
    <div class="site-ball" title="football">
      <svg fill="#fff" width="32" height="32" viewBox="0 0 48 48"><circle cx="24" cy="24" r="22" fill="#fff"/><circle cx="24" cy="24" r="18" fill="none" stroke="#108f46" stroke-width="2"/><circle cx="24" cy="24" r="7" fill="#108f46" stroke="#175c2f" stroke-width="2"/><path d="M24 17 l-5 -7 M24 17 l5 -7 M24 31 l-5 7 M24 31 l5 7 M17 24 l-7 -5 M17 24 l-7 5 M31 24 l7 -5 M31 24 l7 5" stroke="#108f46" stroke-width="2" fill="none"/></svg>
    </div>
  </header>
  <section class="hero-section">
    <div class="hero-date" id="date"></div>
    <div class="hero-day" id="day"></div>
    <div class="hero-countdown" id="countdown"></div>
  </section>
  <div class="top-row">
    <div class="card">
      <div class="card-label">Legend of the Day</div>
      <div class="card-image-wrap"><img id="legend-image" class="card-image" alt="Legend Image"></div>
      <div class="card-title" id="legend-title"></div>
      <div class="card-desc" id="legend-desc"></div>
      <a id="legend-link" class="card-link learnmore" target="_blank">Learn More</a>
    </div>
    <div class="card">
      <div class="card-label gold">Stadium of the Day</div>
      <div class="card-image-wrap"><img id="stadium-image" class="card-image" alt="Stadium Image"></div>
      <div class="card-title" id="stadium-title"></div>
      <div class="card-desc" id="stadium-desc"></div>
      <a id="stadium-link" class="card-link" target="_blank">Learn More</a>
      <div class="card-info" id="stadium-info"></div>
    </div>
  </div>
  <div class="mid-row">
    <div class="card">
      <div class="card-label">Trivia</div>
      <div class="card-title" id="trivia-title"></div>
      <button class="trivia-btn" id="showTrivia">Show Answer</button>
      <div class="trivia-answer" id="triviaA"></div>
    </div>
  </div>
  <div class="bottom-row">
    <div class="card">
      <div class="card-label gold">Life-Changing Gear</div>
      <div class="card-title" id="gear-title"></div>
      <div class="card-desc" id="gear-desc"></div>
      <a id="gear-link" class="card-link" target="_blank">Buy on Amazon &gt;&gt;</a>
    </div>
    <div class="card">
      <div class="card-label">You Didn't Know You Need</div>
      <div class="card-title" id="stuff-title"></div>
      <div class="card-desc" id="stuff-desc"></div>
      <a id="stuff-link" class="card-link" target="_blank">Buy on Amazon &gt;&gt;</a>
    </div>
    <div class="card">
      <div class="card-label gold">Fan Gear</div>
      <div class="card-title" id="fan-title"></div>
      <div class="card-desc" id="fan-desc"></div>
      <a id="fan-link" class="card-link" target="_blank">Buy on Amazon &gt;&gt;</a>
    </div>
  </div>
  <div class="bottom-nav" id="dayNav"></div>
  <script>
    function getDayOffset() {
      const params = new URLSearchParams(location.search);
      const d = parseInt(params.get('d'), 10);
      if (isNaN(d)) return 0;
      return d;
    }
    function getDateForOffset(offset) {
      const now = new Date();
      now.setHours(0,0,0,0);
      now.setDate(now.getDate() + offset);
      return now;
    }
    async function loadData(url) {
      const response = await fetch(url);
      if (!response.ok) throw new Error("Failed to fetch " + url);
      return await response.json();
    }
    function pickDailyRandom(arr, category, date) {
      if (!arr || !arr.length) return null;
      const dateStr = date.getFullYear() + String(date.getMonth()+1).padStart(2, '0') + String(date.getDate()).padStart(2, '0');
      let hash = 0;
      const seed = category + dateStr;
      for (let i = 0; i < seed.length; i++) {
        hash = (hash << 5) - hash + seed.charCodeAt(i); hash |= 0;
      }
      const idx = Math.abs(hash) % arr.length;
      return arr[idx];
    }
    function getCountdown(targetDate, todayDate) {
      const diffMs = targetDate.getTime() - todayDate.getTime();
      return Math.ceil(diffMs / (1000*60*60*24)); // in days
    }

    async function startSite() {
      const offset = getDayOffset();
      const thisDate = getDateForOffset(offset);
      const days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
      const nextWorldCup = new Date(Date.UTC(2026, 5, 11)); // June 11, 2026
      let wcDays = getCountdown(nextWorldCup, thisDate);
      document.getElementById("date").textContent =
        thisDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
      document.getElementById("day").textContent = `Itâ€™s ${days[thisDate.getDay()]}`;
      document.getElementById("countdown").textContent =
        `World Cup Kick Off in ${wcDays} Days`;

      // Fetch JSON data from root directory
      const [legends, stadiums, trivia, links] = await Promise.all([
        loadData('legends.json'),
        loadData('stadiums.json'),
        loadData('trivia.json'),
        loadData('links.json')
      ]).catch(e=>{
        alert("Error loading data: " + e.message);
        return [[],[],[],[]];
      });

      // Legend card
      const legend = pickDailyRandom(legends, 'legend', thisDate);
      document.getElementById('legend-title').textContent = legend ? legend.name : "(add more legends!)";
      document.getElementById('legend-desc').textContent = legend ? legend.desc : "";
      document.getElementById('legend-link').style.display = legend && legend.url ? "inline-block" : "none";
      if (legend && legend.url) document.getElementById('legend-link').href = legend.url;
      document.getElementById('legend-image').src = legend && legend.image ? legend.image : "";
      document.getElementById('legend-image').style.display = legend && legend.image ? "block" : "none";

      // Stadium card
      const stadium = pickDailyRandom(stadiums, 'stadium', thisDate);
      document.getElementById('stadium-title').textContent = stadium ? stadium.name : "(add more stadiums!)";
      document.getElementById('stadium-desc').textContent = stadium ? stadium.desc : "";
      document.getElementById('stadium-link').style.display = stadium && stadium.url ? "inline-block" : "none";
      if (stadium && stadium.url) document.getElementById('stadium-link').href = stadium.url;
      document.getElementById('stadium-image').src = stadium && stadium.image ? stadium.image : "";
      document.getElementById('stadium-image').style.display = stadium && stadium.image ? "block" : "none";
      document.getElementById('stadium-info').textContent = stadium ? stadium.info : "";

      // Trivia card
      const triviaObj = pickDailyRandom(trivia, 'trivia', thisDate);
      document.getElementById('trivia-title').textContent = triviaObj ? triviaObj.q : "(add more trivia!)";
      document.getElementById('triviaA').textContent = triviaObj ? triviaObj.a : "";
      document.getElementById('triviaA').style.display = "none";
      document.getElementById('showTrivia').disabled = false;
      document.getElementById('showTrivia').onclick = () => {
        document.getElementById('triviaA').style.display = "block";
        document.getElementById('showTrivia').disabled = true;
      };

      // Bottom gear/affiliate cards (fetch from links.json)
      const gearObj = pickDailyRandom(links.gear || [], 'gear', thisDate);
      document.getElementById('gear-title').textContent = gearObj ? gearObj.title : "(add more gear!)";
      document.getElementById('gear-desc').textContent = gearObj ? gearObj.desc : "";
      document.getElementById('gear-link').style.display = gearObj && gearObj.url ? "inline-block" : "none";
      if (gearObj && gearObj.url) document.getElementById('gear-link').href = gearObj.url;

      const stuffObj = pickDailyRandom(links.stuff || [], 'stuff', thisDate);
      document.getElementById('stuff-title').textContent = stuffObj ? stuffObj.title : "(add more stuff!)";
      document.getElementById('stuff-desc').textContent = stuffObj ? stuffObj.desc : "";
      document.getElementById('stuff-link').style.display = stuffObj && stuffObj.url ? "inline-block" : "none";
      if (stuffObj && stuffObj.url) document.getElementById('stuff-link').href = stuffObj.url;

      const fanObj = pickDailyRandom(links.fan || [], 'fan', thisDate);
      document.getElementById('fan-title').textContent = fanObj ? fanObj.title : "(add more fan gear!)";
      document.getElementById('fan-desc').textContent = fanObj ? fanObj.desc : "";
      document.getElementById('fan-link').style.display = fanObj && fanObj.url ? "inline-block" : "none";
      if (fanObj && fanObj.url) document.getElementById('fan-link').href = fanObj.url;

      // Bottom navigation links
      let navHtml = '';
      navHtml += `<a class="day-link" href="?d=${offset-1}">&#8592; Previous Day</a> `;
      if (offset < 0) {
        if (offset == -1) navHtml += `<span class="today-label">(Yesterday)</span>`;
        navHtml += `<a class="day-link" href="${location.pathname}">Today</a> `;
        navHtml += `<a class="day-link" href="?d=${offset+1}">Next Day &#8594;</a>`;
      } else {
        navHtml += `<span class="today-label">(Today)</span>`;
      }
      document.getElementById("dayNav").innerHTML = navHtml;
    }
    startSite();
  </script>
</body>
</html>
